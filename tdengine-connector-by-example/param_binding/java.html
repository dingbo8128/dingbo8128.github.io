<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Parameter Binding with Java - TDengine Connector By Example</title>


        <!-- Custom HTML head -->

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="TDengine Connector By Example (TCBE) is a collection of runnable examples that illustrate features of various TDengine connectors.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../index.html">Preface</a></li><li class="chapter-item "><a href="../prepare.html"><strong aria-hidden="true">1.</strong> Preparation</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../prepare/intro_java.html"><strong aria-hidden="true">1.1.</strong> Prepare for Java Connector</a></li><li class="chapter-item "><a href="../prepare/intro_python.html"><strong aria-hidden="true">1.2.</strong> Prepare for Python Connector</a></li><li class="chapter-item "><a href="../prepare/intro_go.html"><strong aria-hidden="true">1.3.</strong> Prepare for Go Connector</a></li><li class="chapter-item "><a href="../prepare/intro_Js.html"><strong aria-hidden="true">1.4.</strong> Prepare for Node.js Connector</a></li><li class="chapter-item "><a href="../prepare/intro_cpp.html"><strong aria-hidden="true">1.5.</strong> Prepare for C++ Connector</a></li><li class="chapter-item "><a href="../prepare/intro_rust.html"><strong aria-hidden="true">1.6.</strong> Prepare for Rust Connector</a></li><li class="chapter-item "><a href="../prepare/intro_cs.html"><strong aria-hidden="true">1.7.</strong> Prepare for C# Connector</a></li><li class="chapter-item "><a href="../prepare/intro_lua.html"><strong aria-hidden="true">1.8.</strong> Prepare for Lua Connector</a></li></ol></li><li class="chapter-item "><a href="../connecting.html"><strong aria-hidden="true">2.</strong> Connecting to the Server</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../connecting/java.html"><strong aria-hidden="true">2.1.</strong> Get Connection with Java</a></li><li class="chapter-item "><a href="../connecting/python.html"><strong aria-hidden="true">2.2.</strong> Get Connection with Python</a></li><li class="chapter-item "><a href="../connecting/go.html"><strong aria-hidden="true">2.3.</strong> Get Connection with Go</a></li><li class="chapter-item "><a href="../connecting/js.html"><strong aria-hidden="true">2.4.</strong> Get Connection with Node.js</a></li><li class="chapter-item "><a href="../connecting/cpp.html"><strong aria-hidden="true">2.5.</strong> Get Connection with C++</a></li><li class="chapter-item "><a href="../connecting/rust.html"><strong aria-hidden="true">2.6.</strong> Get Connection with Rust</a></li><li class="chapter-item "><a href="../connecting/cs.html"><strong aria-hidden="true">2.7.</strong> Get Connection with C#</a></li><li class="chapter-item "><a href="../connecting/lua.html"><strong aria-hidden="true">2.8.</strong> Get Connection with Lua</a></li></ol></li><li class="chapter-item "><a href="../sync_query.html"><strong aria-hidden="true">3.</strong> Synchronous Query</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../sync_query/java.html"><strong aria-hidden="true">3.1.</strong> Synchronous Query with Java</a></li><li class="chapter-item "><a href="../sync_query/python.html"><strong aria-hidden="true">3.2.</strong> Synchronous Query with Python</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../sync_query/python/pep.html"><strong aria-hidden="true">3.2.1.</strong> PEP-249 API</a></li><li class="chapter-item "><a href="../sync_query/python/objective.html"><strong aria-hidden="true">3.2.2.</strong> Query API</a></li></ol></li><li class="chapter-item "><a href="../sync_query/go.html"><strong aria-hidden="true">3.3.</strong> Synchronous Query with Go</a></li><li class="chapter-item "><a href="../sync_query/js.html"><strong aria-hidden="true">3.4.</strong> Synchronous Query with Node.js</a></li><li class="chapter-item "><a href="../sync_query/cpp.html"><strong aria-hidden="true">3.5.</strong> Synchronous Query with C++</a></li><li class="chapter-item "><a href="../sync_query/rust.html"><strong aria-hidden="true">3.6.</strong> Synchronous Query with Rust</a></li><li class="chapter-item "><a href="../sync_query/cs.html"><strong aria-hidden="true">3.7.</strong> Synchronous Query with C#</a></li><li class="chapter-item "><a href="../sync_query/lua.html"><strong aria-hidden="true">3.8.</strong> Synchronous Query with Lua</a></li></ol></li><li class="chapter-item "><a href="../async_query.html"><strong aria-hidden="true">4.</strong> Asynchronous Query</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../async_query/python.html"><strong aria-hidden="true">4.1.</strong> Asynchronous Query with Python</a></li><li class="chapter-item "><a href="../async_query/go.html"><strong aria-hidden="true">4.2.</strong> Asynchronous Query with Go</a></li><li class="chapter-item "><a href="../async_query/js.html"><strong aria-hidden="true">4.3.</strong> Asynchronous Query with Node.js</a></li><li class="chapter-item "><a href="../async_query/cpp.html"><strong aria-hidden="true">4.4.</strong> Asynchronous Query with C++</a></li><li class="chapter-item "><a href="../async_query/rust.html"><strong aria-hidden="true">4.5.</strong> Asynchronous Query with Rust</a></li><li class="chapter-item "><a href="../async_query/cs.html"><strong aria-hidden="true">4.6.</strong> Asynchronous Query with C#</a></li><li class="chapter-item "><a href="../async_query/lua.html"><strong aria-hidden="true">4.7.</strong> Asynchronous Query with Lua</a></li></ol></li><li class="chapter-item "><a href="../stream.html"><strong aria-hidden="true">5.</strong> Continuous Query</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../stream/python.html"><strong aria-hidden="true">5.1.</strong> Continuous Query with Python</a></li><li class="chapter-item "><a href="../stream/js.html"><strong aria-hidden="true">5.2.</strong> Continuous Query with Node.js</a></li><li class="chapter-item "><a href="../stream/lua.html"><strong aria-hidden="true">5.3.</strong> Continuous Query with Lua</a></li></ol></li><li class="chapter-item expanded "><a href="../param_binding.html"><strong aria-hidden="true">6.</strong> Parameter Binding</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../param_binding/java.html" class="active"><strong aria-hidden="true">6.1.</strong> Parameter Binding with Java</a></li><li class="chapter-item "><a href="../param_binding/python.html"><strong aria-hidden="true">6.2.</strong> Parameter Binding with Python</a></li><li class="chapter-item "><a href="../param_binding/go.html"><strong aria-hidden="true">6.3.</strong> Parameter Binding with Go</a></li><li class="chapter-item "><a href="../param_binding/cpp.html"><strong aria-hidden="true">6.4.</strong> Parameter Binding with C++</a></li><li class="chapter-item "><a href="../param_binding/rust.html"><strong aria-hidden="true">6.5.</strong> Parameter Binding with Rust</a></li><li class="chapter-item "><a href="../param_binding/cs.html"><strong aria-hidden="true">6.6.</strong> Parameter Binding with C#</a></li></ol></li><li class="chapter-item "><a href="../schemaless.html"><strong aria-hidden="true">7.</strong> Schemaless</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../schemaless/java.html"><strong aria-hidden="true">7.1.</strong> Schemaless Writing with Java</a></li><li class="chapter-item "><a href="../schemaless/python.html"><strong aria-hidden="true">7.2.</strong> Schemaless Writing with Python</a></li><li class="chapter-item "><a href="../schemaless/go.html"><strong aria-hidden="true">7.3.</strong> Schemaless Writing with Go</a></li><li class="chapter-item "><a href="../schemaless/js.html"><strong aria-hidden="true">7.4.</strong> Schemaless Writing with Node.js</a></li><li class="chapter-item "><a href="../schemaless/cpp.html"><strong aria-hidden="true">7.5.</strong> Schemaless Writing with C++</a></li><li class="chapter-item "><a href="../schemaless/rust.html"><strong aria-hidden="true">7.6.</strong> Schemaless Writing with Rust</a></li><li class="chapter-item "><a href="../schemaless/cs.html"><strong aria-hidden="true">7.7.</strong> Schemaless Writing with C#</a></li><li class="chapter-item "><a href="../schemaless/lua.html"><strong aria-hidden="true">7.8.</strong> Schemaless Writing with Lua</a></li></ol></li><li class="chapter-item "><a href="../subscription.html"><strong aria-hidden="true">8.</strong> Subscription</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../subscription/java.html"><strong aria-hidden="true">8.1.</strong> Subscription with Java</a></li><li class="chapter-item "><a href="../subscription/python.html"><strong aria-hidden="true">8.2.</strong> Subscription with Python</a></li><li class="chapter-item "><a href="../subscription/go.html"><strong aria-hidden="true">8.3.</strong> Subscription with Go</a></li><li class="chapter-item "><a href="../subscription/cpp.html"><strong aria-hidden="true">8.4.</strong> Subscription with C++</a></li><li class="chapter-item "><a href="../subscription/js.html"><strong aria-hidden="true">8.5.</strong> Subscription with Node.js</a></li></ol></li><li class="chapter-item "><a href="../json_type.html"><strong aria-hidden="true">9.</strong> JSON Type</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../json_type/java.html"><strong aria-hidden="true">9.1.</strong> JSON Type Support in Java</a></li><li class="chapter-item "><a href="../json_type/python.html"><strong aria-hidden="true">9.2.</strong> JSON Type Support in Python</a></li><li class="chapter-item "><a href="../json_type/go.html"><strong aria-hidden="true">9.3.</strong> JSON Type Support in Go</a></li><li class="chapter-item "><a href="../json_type/js.html"><strong aria-hidden="true">9.4.</strong> JSON Type Support in Node.js</a></li><li class="chapter-item "><a href="../json_type/cpp.html"><strong aria-hidden="true">9.5.</strong> JSON Type Support in C++</a></li><li class="chapter-item "><a href="../json_type/rust.html"><strong aria-hidden="true">9.6.</strong> JSON Type Support in Rust</a></li><li class="chapter-item "><a href="../json_type/cs.html"><strong aria-hidden="true">9.7.</strong> JSON Type Support in C#</a></li></ol></li><li class="chapter-item "><a href="../restful.html"><strong aria-hidden="true">10.</strong> Restful API</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../restful/java.html"><strong aria-hidden="true">10.1.</strong> Use Restful API with Java</a></li><li class="chapter-item "><a href="../restful/js.html"><strong aria-hidden="true">10.2.</strong> Use Restful API with Node.js</a></li><li class="chapter-item "><a href="../restful/rust.html"><strong aria-hidden="true">10.3.</strong> Use Restful API with Rust</a></li></ol></li><li class="chapter-item "><a href="../appendix.html"><strong aria-hidden="true">11.</strong> Appendix</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../appendix/c_api.html"><strong aria-hidden="true">11.1.</strong> C API Reference</a></li><li class="chapter-item "><a href="../appendix/feature_matrix.html"><strong aria-hidden="true">11.2.</strong> Connector Feature Matrix</a></li><li class="chapter-item "><a href="../appendix/troubles1.html"><strong aria-hidden="true">11.3.</strong> Troubleshooting One</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">TDengine Connector By Example</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="parameter-binding-with-java"><a class="header" href="#parameter-binding-with-java">Parameter Binding with Java</a></h1>
<p>Since version 2.1.2.0, TDengine's JDBC-JNI implementation has significantly improved parameter binding support for data write (INSERT) scenarios avoiding SQL parsing and significantly improving the write performance.</p>
<h2 id="1-get-started"><a class="header" href="#1-get-started">1. Get Started</a></h2>
<ol>
<li>Java: <code>1.8</code></li>
<li>taos-jdbcdriver: <code>2.0.34</code></li>
<li>TDengine: <code>2.2.1.3</code></li>
</ol>
<h3 id="11-example"><a class="header" href="#11-example">1.1 Example</a></h3>
<pre><code class="language-java">package com.taos.tdjava;

import com.taosdata.jdbc.TSDBPreparedStatement;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.Random;

public class TestParamBind {
    private static Random r = new Random();

    private static Connection getConnection() throws SQLException {
        Connection conn = DriverManager.getConnection(&quot;jdbc:TAOS://127.0.0.1:6030&quot;, &quot;root&quot;, &quot;taosdata&quot;);
        return conn;
    }

    private static void createTable(Connection conn) throws SQLException {
        try(Statement stmt = conn.createStatement()) {
            stmt.executeUpdate(&quot;create database if not exists java_test&quot;);
            stmt.executeUpdate(&quot;use java_test&quot;);
            stmt.executeUpdate(&quot;drop table if exists weather&quot;);
            stmt.executeUpdate(&quot;create stable if not exists &quot; +
                    &quot;weather(ts timestamp, c1 int, c2 binary(10)) &quot; +
                    &quot;tags(no int, location binary(10))&quot;);
        }
    }

    public static void test() throws SQLException {
        try (Connection conn = getConnection()) {
            createTable(conn);
            // In the INSERT statement,
            // the VALUES clause allows you to specify a specific column;
            // If automatic table creation is adopted,
            // the TAGS clause needs to set the parameter values of all TAGS columns
            String psql = &quot;insert into ? using weather tags (?, ?) (ts, c1, c2) values(?, ?, ?)&quot;;
            try (TSDBPreparedStatement pst = (TSDBPreparedStatement) conn.prepareStatement(psql)) {
                pst.setTableName(&quot;w1&quot;);
                // set tags
                pst.setTagInt(0, r.nextInt(10));
                pst.setTagString(1, &quot;Beijing&quot;);
                int numOfRows = 10;
                // set values
                ArrayList&lt;Long&gt; ts = new ArrayList&lt;&gt;();
                for (int i = 0; i &lt; numOfRows; i++) {
                    ts.add(System.currentTimeMillis() + i);
                }
                pst.setTimestamp(0, ts);
                ArrayList&lt;Integer&gt; s1 = new ArrayList&lt;&gt;();
                for (int i = 0; i &lt; numOfRows; i++) {
                    s1.add(r.nextInt(100));
                }
                pst.setInt(1, s1);
                ArrayList&lt;String&gt; s2 = new ArrayList&lt;&gt;();
                for (int i = 0; i &lt; numOfRows; i++) {
                    s2.add(&quot;test&quot; + r.nextInt(100));
                }
                pst.setString(2, s2, 10);
                // The cache is not cleared after AddBatch. Do not bind new data again before ExecuteBatch
                pst.columnDataAddBatch();
                pst.columnDataExecuteBatch();
                // Clear the cache, after which you can bind new data(including table names, tags, values):
                pst.columnDataClearBatch();
                pst.columnDataCloseBatch();
            }
        }
    }

    public static void main(String[] args) {
        try {
            test();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}

</code></pre>
<pre><code class="language-shell">taos&gt; select  tbname, * from weather;
             tbname             |           ts            |     c1      |     c2     |     no      |  location  |
=================================================================================================================
 w1                             | 2021-12-20 12:11:28.277 |          16 | test64     |           7 | Beijing    |
 w1                             | 2021-12-20 12:11:28.278 |          87 | test21     |           7 | Beijing    |
 w1                             | 2021-12-20 12:11:28.279 |           5 | test41     |           7 | Beijing    |
 w1                             | 2021-12-20 12:11:28.280 |          34 | test44     |           7 | Beijing    |
 w1                             | 2021-12-20 12:11:28.281 |          96 | test19     |           7 | Beijing    |
 w1                             | 2021-12-20 12:11:28.282 |          29 | test0      |           7 | Beijing    |
 w1                             | 2021-12-20 12:11:28.283 |          66 | test59     |           7 | Beijing    |
 w1                             | 2021-12-20 12:11:28.284 |          41 | test64     |           7 | Beijing    |
 w1                             | 2021-12-20 12:11:28.285 |          78 | test88     |           7 | Beijing    |
 w1                             | 2021-12-20 12:11:28.286 |          28 | test45     |           7 | Beijing    |
Query OK, 10 row(s) in set (0.119000s)
</code></pre>
<p><strong>Note:</strong></p>
<ol>
<li>For one batch of data, <code>setTableName</code> and <code>setTag*</code> only need to call once, which means, the batch of data must belong to the same table.</li>
<li>Use <code>setString</code> for column with type <code>binary</code>; Use <code>setNString</code> for column with type <code>nchar</code>. </li>
<li>Both <code>setString</code> and <code>setNString</code> require the user to declare the column width of the corresponding column in the table definition in the size parameter.</li>
</ol>
<h3 id="12-related-api"><a class="header" href="#12-related-api">1.2 Related API</a></h3>
<p>The methods used to set tags are:</p>
<pre><code class="language-java">public void setTagNull(int index, int type)
public void setTagBoolean(int index, boolean value)
public void setTagInt(int index, int value)
public void setTagByte(int index, byte value)
public void setTagShort(int index, short value)
public void setTagLong(int index, long value)
public void setTagTimestamp(int index, long value)
public void setTagFloat(int index, float value)
public void setTagDouble(int index, double value)
public void setTagString(int index, String value)
public void setTagNString(int index, String value)
</code></pre>
<p>The methods used to set columns are:</p>
<pre><code class="language-java">public void setInt(int columnIndex, ArrayList&lt;Integer&gt; list) throws SQLException
public void setFloat(int columnIndex, ArrayList&lt;Float&gt; list) throws SQLException
public void setTimestamp(int columnIndex, ArrayList&lt;Long&gt; list) throws SQLException
public void setLong(int columnIndex, ArrayList&lt;Long&gt; list) throws SQLException
public void setDouble(int columnIndex, ArrayList&lt;Double&gt; list) throws SQLException
public void setBoolean(int columnIndex, ArrayList&lt;Boolean&gt; list) throws SQLException
public void setByte(int columnIndex, ArrayList&lt;Byte&gt; list) throws SQLException
public void setShort(int columnIndex, ArrayList&lt;Short&gt; list) throws SQLException
public void setString(int columnIndex, ArrayList&lt;String&gt; list, int size) throws SQLException
public void setNString(int columnIndex, ArrayList&lt;String&gt; list, int size) throws SQLException
</code></pre>
<h2 id="2-upgrade-to-jdbc-driver-2036"><a class="header" href="#2-upgrade-to-jdbc-driver-2036">2. Upgrade to JDBC Driver 2.0.36</a></h2>
<ol>
<li>Java: <code>1.8</code></li>
<li>taos-jdbcdriver: <code>2.0.36</code></li>
<li>TDengine: <code>2.4.0.0</code></li>
</ol>
<h3 id="21-example-bind-different-tables-in-one-batch"><a class="header" href="#21-example-bind-different-tables-in-one-batch">2.1 Example: Bind Different Tables in One Batch</a></h3>
<p>You can insert into multiple tables in ont batch using param biding api now. It's a new feature of JdBC driver.
In the following example, we insert into three sub stables in one batch.</p>
<pre><code class="language-java">package com.taos.test;

import com.taosdata.jdbc.TSDBPreparedStatement;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.Random;

public class TestBindMultiTable {
    private Random r = new Random();

    private Connection getConnection() throws SQLException {
        Connection conn = DriverManager.getConnection(&quot;jdbc:TAOS://127.0.0.1:6030&quot;, &quot;root&quot;, &quot;taosdata&quot;);
        return conn;
    }

    private void createTable(Connection conn) throws SQLException {
        try (Statement stmt = conn.createStatement()) {
            stmt.execute(&quot;drop database if exists java_test&quot;);
            stmt.execute(&quot;create database java_test&quot;);
            stmt.execute(&quot;use java_test&quot;);
            stmt.execute(&quot;create stable weather(ts timestamp, c1 int, c2 binary(10)) &quot; +
                    &quot;tags(no int, location binary(10))&quot;);
        }
    }

    public void run() throws SQLException {
        int numOfTables = 3;
        int numOfRows = 5;
        try (Connection conn = getConnection()) {
            createTable(conn);
            String psql = &quot;insert into ? using weather tags (?, ?) (ts, c1, c2) values(?, ?, ?)&quot;;
            try (TSDBPreparedStatement pst = (TSDBPreparedStatement) conn.prepareStatement(psql)) {
                for (int t = 0; t &lt; numOfTables; t++) {
                    // change sub table name
                    pst.setTableName(&quot;w&quot; + t);
                    // set tags
                    pst.setTagInt(0, r.nextInt(10));
                    pst.setTagString(1, &quot;City_&quot; + (t));
                    // set values
                    ArrayList&lt;Long&gt; ts = new ArrayList&lt;&gt;();
                    for (int i = 0; i &lt; numOfRows; i++) {
                        ts.add(System.currentTimeMillis() + i);
                    }
                    pst.setTimestamp(0, ts);
                    ArrayList&lt;Integer&gt; s1 = new ArrayList&lt;&gt;();
                    for (int i = 0; i &lt; numOfRows; i++) {
                        s1.add(r.nextInt(100));
                    }
                    pst.setInt(1, s1);
                    ArrayList&lt;String&gt; s2 = new ArrayList&lt;&gt;();
                    for (int i = 0; i &lt; numOfRows; i++) {
                        s2.add(&quot;test&quot; + r.nextInt(100));
                    }
                    pst.setString(2, s2, 10);
                    // The cache is not cleared after AddBatch. Do not bind new data again before ExecuteBatch
                    pst.columnDataAddBatch();
                }
                pst.columnDataExecuteBatch();
                pst.columnDataCloseBatch();
            }
        }
    }

    public static void main(String[] args) throws SQLException {
        TestBindMultiTable test = new TestBindMultiTable();
        test.run();
    }
}

</code></pre>
<pre><code class="language-cmd">
taos&gt; select * from java_test.weather;
           ts            |     c1      |     c2     |     no      |  location  |
================================================================================
 2021-12-24 11:00:15.736 |          72 | test14     |           3 | City_0     |
 2021-12-24 11:00:15.737 |          62 | test69     |           3 | City_0     |
 2021-12-24 11:00:15.738 |          46 | test39     |           3 | City_0     |
 2021-12-24 11:00:15.739 |          13 | test42     |           3 | City_0     |
 2021-12-24 11:00:15.740 |          75 | test72     |           3 | City_0     |
 2021-12-24 11:00:15.770 |          35 | test22     |           6 | City_1     |
 2021-12-24 11:00:15.771 |          44 | test95     |           6 | City_1     |
 2021-12-24 11:00:15.772 |           9 | test4      |           6 | City_1     |
 2021-12-24 11:00:15.773 |          72 | test51     |           6 | City_1     |
 2021-12-24 11:00:15.774 |          45 | test32     |           6 | City_1     |
 2021-12-24 11:00:15.778 |          42 | test10     |           8 | City_2     |
 2021-12-24 11:00:15.779 |          62 | test81     |           8 | City_2     |
 2021-12-24 11:00:15.780 |          71 | test4      |           8 | City_2     |
 2021-12-24 11:00:15.781 |          41 | test95     |           8 | City_2     |
 2021-12-24 11:00:15.782 |          66 | test73     |           8 | City_2     |
Query OK, 15 row(s) in set (0.066000s)
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../param_binding.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../param_binding/python.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../param_binding.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../param_binding/python.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
